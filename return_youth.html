<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link rel="stylesheet" href="css/music_9st.css">
	<link rel="stylesheet" href="http://at.alicdn.com/t/font_1466528817_8676143.css">
	<link rel="icon" href="img/maydayicon.jpg" mce_href="//www.jd.com/favicon.ico" type="image/x-icon">
	<script src="http://o7m41tvmg.bkt.clouddn.com/jquery-1.12.4.min.js"></script>
	<title>60节回春医疗保健操口令音乐</title>
</head>
<body>
	<div id='wx_logo' style='margin:0 auto;display:none;'>
		<img src="img/14673.jpg"/>
	</div>
	<div class="wrapper">
		 <div class="background"></div>
		 <div class="content">
			<audio>
			 	<source title="勤于锻炼,无病缠身！" src="music/return-youth.mp3">
			 				
			</audio>
			<div class="music-massage" >
				<p class="musicname">60节回春医疗保健操</p>
				<p class="musicer">勤于锻炼,无病缠身！</p>
				<p class="record">严巍制作-努力做大自然的搬运工！^_^</p>
			</div>
			<div class="music-icon">
				<!--a class="m-icon m-fenxiang colored" href="http://service.weibo.com/share/share.php?title=#_loginLayer_1466697157538" target="new"></a-->
				<span class="m-icon m-star colored"></span>
				<span class="m-icon m-heart colored"></span>
			</div>
		</div>
		<span class="basebar">
			<span class="progressbar"></span>
		</span>
		<div class="controls">
			<div class="play-control">
				<span class="m-icon m-prev btn2"></span>
				<span class="m-icon m-play btn1"></span>
				
				<span class="m-icon m-next btn3"></span>
			</div>
		<!--	<div class="music-control">
				<span class="m-icon m-xunhuan colored"></span>
				<span class="m-icon m-radom colored"></span>
			</div>	-->		
		</div>

	</div>
	<script>
		//播放控制
		var myAudio = $("audio")[0];
		var $sourceList = $("source");
		var currentSrcIndex = 0;
		var currentSr = "";
		$(".btn1").click(function(){
			if (myAudio.paused) {
				myAudio.play();
				$(this).removeClass('m-play').addClass('m-pause');
			} else {
				myAudio.pause();
				$(this).removeClass('m-pause').addClass('m-play');
			}
		});
		$(".btn3").click(function(){
			next()
		});
		$(".btn2").click(function(){
			prev()
		});
		function next(){
			++currentSrcIndex > $sourceList.length - 1 && (currentSrcIndex = 0);
			change()
			$('.btn1').removeClass('m-play').addClass('m-pause');
		}
		function prev(){
			--currentSrcIndex < 0 && (currentSrcIndex = $sourceList.length - 1);
			change()
			$('.btn1').removeClass('m-play').addClass('m-pause');
		}
		function change(){
			currentSrc = $("source").eq(currentSrcIndex).prop("src");
			var title = $("source").eq(currentSrcIndex).prop("title").split(/\.|-/);
			$('.musicname').text(title[1]);
			$('.musicer').text(title[0]);
			$('.record').text(title[2]);
			myAudio.src = currentSrc;
			myAudio.play();
		}
		//进度条控制
		setInterval(present,500)
		$(".basebar").mousedown(function(ev){
			var posX = ev.clientX;
			var targetLeft = $(this).offset().left;
			var percentage = (posX - targetLeft)/400*100;
			myAudio.currentTime = myAudio.duration * percentage/100;
		});
		function present(){
			var length = myAudio.currentTime/myAudio.duration*100;
			$('.progressbar').width(length+'%');
			if(myAudio.currentTime == myAudio.duration){
			next()
		}			
		}
		//icon
		$('.m-star').on('click',function(){
			$(this).toggleClass('stared').toggleClass('colored')
		})
		$('.m-heart').on('click',function(){
			$(this).toggleClass('loved').toggleClass('colored')
		})
	</script>
</body>
</html>

